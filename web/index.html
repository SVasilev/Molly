<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Final Fantasy I In Browser</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<script type="text/javascript" src="/lib/phaser/phaser.min.js"></script>
		<script type="text/javascript" src="/lib/utils/presentation.js"></script>
		<script type="text/javascript" src="/lib/jquery/jquery-1.11.1.min.js"></script>
		<script type="text/javascript">
		/*var game = new Phaser.Game(1280, 720, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });
		function preload() {
		    game.load.image('nanoha', 'assets/img/game/ff1Logo.jpg');
		}
		function create() {
		    var sprite = game.add.sprite(game.world.centerX, game.world.centerY, 'nanoha');
		    sprite.anchor.set(0.5);
		    game.stage.backgroundColor = '#4d4d4d';
		    
		    var shape = game.add.graphics(0, 0);  //init rect
			shape.lineStyle(2, 0x0000FF, 1); // width, color (0x0000FF), alpha (0 -> 1) // required settings
			shape.beginFill(0xFFFF0B, 1) // color (0xFFFF0B), alpha (0 -> 1) // required settings
			shape.drawRect(1280 - 100, 720 - 100, 100, 100); // (x, y, w, h) 
			shape.endFill();
		    	
		    
			//Scaling
			this.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;
		    game.scale.refresh();
		}
		function update() {
			
		}
		function render () {
		    game.debug.inputInfo(32, 32);
		}*/


		/*
		var game = new Phaser.Game(1280, 720, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render });

		function preload() {
		    game.load.image('worldmap', '../img/world/worldMap.png');
		}

		var sprite;
		var cursors;

		function create() {
			game.physics.startSystem(Phaser.Physics.P2JS);

		    //  Add a sprite
		    sprite = game.add.tileSprite(0, 0, 1280, 720, 'worldmap');
		    sprite.scale.setTo(4, 4);

		    //  Enable if for physics. This creates a default rectangular body.
			game.physics.p2.enable(sprite);
		    
			this.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;
		    game.scale.refresh();

		    text = game.add.text(20, 20, 'move with arrow keys', { fill: '#ffffff' });

		    cursors = game.input.keyboard.createCursorKeys();

		}

		function update() {

			//sprite.body.setZeroVelocity();

		    if (cursors.left.isDown)
		    {
		    	//sprite.body.moveLeft(400);
		        sprite.tilePosition.x += 8;
		    }
		    else if (cursors.right.isDown)
		    {
		    	//sprite.body.moveRight(400);
		        sprite.tilePosition.x -= 8;
		    }

		    if (cursors.up.isDown)
		    {
		    	//sprite.body.moveUp(400);
		        sprite.tilePosition.y += 8;
		    }
		    else if (cursors.down.isDown)
		    {
		    	//sprite.body.moveDown(400);
		        sprite.tilePosition.y -= 8;
		    }

		}
		
		function render () {
		    game.debug.inputInfo(32, 32);
		}
		*/
		
		var game = new Phaser.Game(1280, 720, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });

		function preload() {

			game.load.tilemap('map', '../smth.json', null, Phaser.Tilemap.TILED_JSON);
			game.load.tilemap('map1', '../smth1.json', null, Phaser.Tilemap.TILED_JSON);
			game.load.image('tileset', 'tileset1.png');
			game.load.image('tileset1', 'blackTileset.png');
		    //game.load.image('walls_1x2', 'assets/tilemaps/tiles/walls_1x2.png');
		    //game.load.image('tiles2', 'assets/tilemaps/tiles/tiles2.png');
		    game.load.image('ship', '../lib/phaser/examples/assets/sprites/thrust_ship2.png');

		}

		var ship;
		var map;
		var map1;
		var layer;
		var layer1;
		var cursors;

		function create() {

		    game.physics.startSystem(Phaser.Physics.P2JS);

		    game.stage.backgroundColor = '#2d2d2d';

		    map = game.add.tilemap('map');
		    map1 = game.add.tilemap('map1');

		    map.addTilesetImage('tileset');
		    map1.addTilesetImage('tileset1');
		    //map.addTilesetImage('walls_1x2');
		    //map.addTilesetImage('tiles2');
		    
		    layer = map.createLayer('Tile Layer 1');
		    layer1 = map1.createLayer('Tile Layer 1');

		    layer.resizeWorld();
		    layer1.resizeWorld();

		    //  Set the tiles for collision.
		    //  Do this BEFORE generating the p2 bodies below.
		    map.setCollisionBetween(3, 41);

		    //  Convert the tilemap layer into bodies. Only tiles that collide (see above) are created.
		    //  This call returns an array of body objects which you can perform addition actions on if
		    //  required. There is also a parameter to control optimising the map build.
		    game.physics.p2.convertTilemap(map, layer);
		    game.physics.p2.convertTilemap(map1, layer1);
		    
		    var aLayer = map1.layers["0"];
		    for(var i = 0; i < 5; i++) {
		    	for(var j = 0; j < 81; j++) {
		    		aLayer.data[i][j] = 0;
		    	}
		    }
		    //var ddd  = list.getTiles(0, 0, 1, 1);
		    //ddd[0].layer = layer1;

		    
		    ship = game.add.sprite(200, 200, 'ship');
		    asd  = game.add.sprite(180, 180, 'ship');
		    //ship.colideWith(platform)
		    game.physics.p2.enable(ship);

		    game.camera.follow(ship);

		    //  By default the ship will collide with the World bounds,
		    //  however because you have changed the size of the world (via layer.resizeWorld) to match the tilemap
		    //  you need to rebuild the physics world boundary as well. The following
		    //  line does that. The first 4 parameters control if you need a boundary on the left, right, top and bottom of your world.
		    //  The final parameter (false) controls if the boundary should use its own collision group or not. In this case we don't require
		    //  that, so it's set to false. But if you had custom collision groups set-up then you would need this set to true.
		    game.physics.p2.setBoundsToWorld(true, true, true, true, false);

		    //  Even after the world boundary is set-up you can still toggle if the ship collides or not with this:
		    // ship.body.collideWorldBounds = false;

		    cursors = game.input.keyboard.createCursorKeys();
		    
		    this.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;
		    game.scale.refresh();

		}

		function update() {

		    if (cursors.left.isDown)
		    {
		        ship.body.rotateLeft(100);
		    }
		    else if (cursors.right.isDown)
		    {
		        ship.body.rotateRight(100);
		    }
		    else
		    {
		        ship.body.setZeroRotation();
		    }

		    if (cursors.up.isDown)
		    {
		        ship.body.thrust(400);
		    }
		    else if (cursors.down.isDown)
		    {
		        ship.body.reverse(400);
		    }

		}

		function render() {
			game.debug.inputInfo(32, 32);
		}
		/*
		var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create });

		function preload() {

		    //  37x45 is the size of each frame

		    //  There are 18 frames in the PNG - you can leave this value blank if the frames fill up the entire PNG, but in this case there are some
		    //  blank frames at the end, so we tell the loader how many to load

		    game.load.spritesheet('mummy', '../lib/phaser/examples/assets/sprites/metalslug_mummy37x45.png', 37, 45, 18);
		}

		function create() {

		    var mummy = game.add.sprite(300, 200, 'mummy');
		    
		    mummy.anchor.setTo(.5,.5);

			 // Invert scale.x to flip left/right
			mummy.scale.x *= -1;
	
			 // Invert scale.y to flip up/down
			mummy.scale.y *= -1;

		    //  Here we add a new animation called 'walk'
		    //  Because we didn't give any other parameters it's going to make an animation from all available frames in the 'mummy' sprite sheet
		    mummy.animations.add('walk');

		    //  And this starts the animation playing by using its key ("walk")
		    //  30 is the frame rate (30fps)
		    //  true means it will loop when it finishes
		    mummy.animations.play('walk', 20, true);

		}*/
			
		</script>
	</head>
	<body>
		
	    <div id="login" style="position: absolute; left: 40%; top: 50%;">
	    	<div style="position: relative; left: -33%; top: -23vh;">
				<div class="container">
					<section id="content">
						<form action="#">
							<h1>Login or Register</h1>
							<div> <input type="email" placeholder="E-mail" required id="email" autocomplete="off" /> </div> 
							<div> <input type="password" placeholder="Password" required id="password" /> </div>
							<div> <p id="exceptionText"> &nbsp; </p> </div>
							<div> <button type="button" onclick="presentationUtils.registerUser()" > Continue </button> </div>
						</form>
					</section>
				</div>
			</div>
	    </div>
	    <!--  -->
	</body>
</html>

